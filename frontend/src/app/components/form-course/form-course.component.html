<main>
  <div class="container">
    <div class="row">
      <div class="container">
        <div class="row">
          <div class="col-8 pe-5">
            <h1 class="mb-5" id="newCourseTitle">New course</h1>
            <form id="newCourseForm" class="needs-validation">
              <div class="mb-3">
                <label for="courseTitle" class="form-label">Title</label>
                <input
                  type="text"
                  class="form-control"
                  id="title"
                  name="title"
                  aria-label="title"
                  [(ngModel)]="title"
                  required />
                <div class="invalid-feedback">Please fill out this field.</div>
              </div>
              <div class="mb-3">
                <label for="courseDescription" class="form-label"
                  >Description</label
                >
                <textarea
                  class="form-control"
                  id="description"
                  name="description"
                  rows="3"
                  [(ngModel)]="description"
                  required></textarea>
                <div class="invalid-feedback">Please fill out this field.</div>
              </div>
              <div class="mb-3">
                <label for="coursePrice" class="form-label">Price</label>
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text">$</span>
                  </div>
                  <input
                    type="text"
                    class="form-control"
                    id="price"
                    name="price"
                    aria-label="Amount (to the nearest dollar)"
                    required
                    pattern="[1234567890]+"
                    [(ngModel)]="price" />
                  <div class="invalid-feedback">
                    Please give a price for the course.
                  </div>
                </div>
              </div>
              <div class="mb-3">
                <label for="courseImage" class="form-label">Thumbnail</label>
                <input
                  class="form-control"
                  type="file"
                  id="thumbnail"
                  name="thumbnail"
                  required
                  accept=".jpeg,.jpg,.png,.gif"
                  (change)="updateThumbnail($event)" />
                <div class="invalid-feedback">Please upload a thumbnail.</div>
              </div>
              <div class="mb-3">
                <label for="courseTags" class="form-label">Themes</label>
                <app-tags-input
                  (tagsEvent)="changeTags($event)"
                  [initialTags]="tags"></app-tags-input>
                <div id="emailHelp" class="form-text">
                  Add each theme separated by a space or a comma.
                </div>
              </div>
              <div class="mt-4 mb-3">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    role="switch"
                    id="isFree"
                    name="isFree"
                    [(ngModel)]="isFree" />
                  <label class="form-check-label" for="isFreeCourse"
                    >Make course FREE</label
                  >
                </div>
              </div>
              <div class="mb-3">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    role="switch"
                    id="termsAgreed"
                    name="termsAgreed"
                    required
                    [(ngModel)]="termsAgreed" />
                  <label class="form-check-label" for="checkTerms"
                    >I agree with the
                    <a href="#">Terms and Conditions</a></label
                  >
                  <div class="invalid-feedback">
                    You must accept our Terms and Conditions.
                  </div>
                </div>
              </div>
              <div class="d-grid gap-2 mt-4">
                <button
                  (click)="handleFormSubmit()"
                  type="submit"
                  class="btn btn-primary"
                  formnovalidate>
                  {{ submitText }} new course
                </button>
              </div>
            </form>
          </div>
          <div class="col-4">
            <div class="container-fluid">
              <div class="row">
                <div class="col-6">
                  <h3 style="display: inline">Lessons</h3>
                </div>
                <div class="col-6 text-end">
                  <a (click)="showNewLesson()" id="addLesson"
                    ><button class="btn btn-primary">+</button></a
                  >
                </div>
              </div>
              <div class="row mt-4" id="newLessonContainer">
                <app-form-lesson
                  (lessonEvent)="addLesson($event)"
                  *ngIf="isAddingLesson"></app-form-lesson>
              </div>
              <div
                class="row mt-4"
                id="lessonsContainer"
                *ngFor="let lesson of lessons">
                <app-form-course-lesson
                  [lesson]="lesson"></app-form-course-lesson>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
